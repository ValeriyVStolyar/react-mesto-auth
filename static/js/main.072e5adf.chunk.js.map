{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ProtectedRoute.js","components/Register.js","components/Login.js","images/popup-union-success.svg","images/popup-union-fail.svg","components/InfoTooltip.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","email","onSignOut","loggedIn","pathname","useLocation","link","text","className","to","rel","onClick","CurrentUserContext","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","src","alt","name","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","avatar","about","map","Date","Footer","PopupWithForm","title","isOpen","onClose","children","save","onSubmit","action","method","ImagePopup","api","address","token","groupID","this","_address","_token","_groupID","fetch","headers","authorization","then","_checkResponse","formData","body","JSON","stringify","cardId","res","ok","json","Promise","reject","status","statusText","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","React","useEffect","e","preventDefault","id","placeholder","value","minLength","maxLength","required","onChange","target","EditAvatarPopup","onUpdateAvatar","avatarDom","useRef","current","ref","AddPlacePopup","setPlace","setLink","ProtectedRoute","Component","component","props","withRouter","setEmail","password","setPassword","onRegister","onLogin","InfoTooltip","isSuccess","succesText","popupSaccess","popupFail","BASE_URL","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","setIsSuccess","history","useHistory","closeAllPopups","handleEscClose","evt","key","document","addEventListener","removeEventListener","getUserInfo","result","catch","err","console","log","getCards","checkToken","jwt","localStorage","getItem","checkResponse","data","push","Provider","removeItem","exact","path","changeLikeCardStatus","newCard","state","c","deleteLikeCard","deleteCard","filter","item","setItem","auth","user","setUserInfo","setUserAvatar","addCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.072e5adf.chunk.js","sourcesContent":["import React from 'react';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\n\nfunction Header({ email, onSignOut, loggedIn }) {\n  const { pathname } = useLocation();\n  const link = `${pathname === '/signup' ? 'signin' : 'signup'}`;\n  const text = `${pathname === '/signup' ? 'войти' : 'регистрация'}`;\n\n  return (\n    <header className=\"header\">\n      <Link to=\"/\" rel=\"noopener\" className=\"logo\"></Link>\n      {loggedIn\n        ? (<ul className=\"header__list\">\n          <li className=\"header__text\">{email}</li>\n          <li className=\"header__text\">\n            <Link to={link} className=\"header__link\" onClick={onSignOut}>выйти</Link>\n          </li>\n        </ul>\n        ) : (<p className=\"header__text\">\n          <Link to={link} className=\"header__link\" onClick={onSignOut}>{text}</Link>\n        </p>)\n      }\n    </header>\n  );\n}\n\nexport default Header;\n","import React, { createContext } from 'react';\n\nconst CurrentUserContext = createContext();\n\nexport default CurrentUserContext;\n","import React, { useContext } from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\n\n  const currentUser = useContext(CurrentUserContext);\n\n  // Определяем, являемся ли мы владельцем текущей карточки\n  const isOwn = card.owner._id === currentUser._id;\n\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\n  const cardDeleteButtonClassName = (\n    `button button_type_remove ${isOwn ? 'button_type_remove' : 'button_disabled'}`\n  );\n\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\n  const cardLikeButtonClassName = (\n    `button button_type_like ${isLiked ? 'button_clicked' : ''}`\n  );\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n\n  return (\n    <article className=\"place\">\n      <button type=\"button\" aria-label=\"Удалить\"\n        className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\n      <img src={card.link} alt={`Картинка места с названием\n      ${card.name}`} className=\"place__image\" onClick={handleClick} />\n      <div className=\"place__list-sights\">\n        <h2 className=\"place__title\">{card.name}</h2>\n        <div className=\"place__like-conteiner\">\n          <button type=\"button\" aria-label=\"Лайкнуть\"\n            className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\n          <p className=\"place__text\">{card.likes.length}</p>\n        </div>\n      </div>\n    </article>\n  );\n}\n\nexport default Card;\n","import React, { useContext } from 'react';\nimport Card from './Card';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction Main({ onEditAvatar, onEditProfile, onAddPlace, onCardClick,\n  cards, onCardLike, onCardDelete }) {\n\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <div className=\"profile__block\">\n          <img src={currentUser.avatar} alt=\"Аватар\" className=\"profile__image\" />\n          <button type=\"button\" aria-label=\"Открыть попап редактирования аватара\"\n            className=\"button button_type_edit-avatar\" onClick={onEditAvatar}></button>\n        </div>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__title\">{currentUser.name}</h1>\n          <button type=\"button\" aria-label=\"Открыть попап\"\n            className=\"button button_type_edit\" onClick={onEditProfile}>\n          </button>\n          <p className=\"profile__subtitle\">{currentUser.about}</p>\n        </div>\n        <button type=\"button\" aria-label=\"Добавить карточку\"\n          className=\"button button_type_add-card\" onClick={onAddPlace}>\n        </button>\n      </section>\n      <section aria-label=\"Фотографии мест\" className=\"places\">\n        {cards.map(card => (\n          <Card\n            card={card}\n            onCardClick={onCardClick}\n            onCardLike={onCardLike}\n            onCardDelete={onCardDelete}\n            key={card._id}\n          />\n        )\n        )}\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\n      {/* <p className=\"footer__copyright\">{`(&copy;) ${date} Mesto Russia`}</p> */}\n    </footer>\n  );\n}\n\nconst date = new Date;\n\nexport default Footer;\n","import React from 'react';\n\nfunction PopupWithForm({ name, title, isOpen, onClose, children, save, onSubmit }) {\n\n  return (\n    <article className={`popup popup_type_${name} ${isOpen && \"popup_opened\"}`}>\n      <form action=\"#\" method=\"POST\" name={`Input-list-${name}`}\n        className=\"popup__container popup__validate\" onSubmit={onSubmit}>\n        <button type=\"button\" aria-label=\"Закрыть попап\"\n          className=\"button button_type_close\" onClick={onClose}></button>\n        <h2 className=\"popup__title\">{title}</h2>\n        {children}\n        <button type=\"submit\" aria-label=\"Сохранить\"\n          className=\"button button_type_submit\">{save}</button>\n      </form>\n    </article>\n  );\n}\n\nexport default PopupWithForm;\n","import React from 'react';\n\nfunction ImagePopup({ card, onClose }) {\n\n  return (\n    <article className={`popup popup_place_picture  ${card.link && \"popup_opened\"}`}>\n      <form action=\"#\" method=\"POST\" name=\"Input-list\" className=\"popup__container popup__container_size_large\">\n        <button type=\"button\" aria-label=\"Закрыть попап\" className=\"button button_type_close\" onClick={onClose}></button>\n        <img src={card.link} alt={`Картинка места с названием ${card.name}`} className=\"popup__image\" />\n        <h2 className=\"popup__title popup__title_size_small\">{card.name}</h2>\n      </form>\n    </article>\n  );\n}\n\nexport default ImagePopup;\n","class Api {\n  constructor({ address, token, groupID }) {\n    this._address = address;\n    this._token = token;\n    this._groupID = groupID;\n  }\n\n  getUserInfo() {\n    return fetch(`${this._address}/v1/${this._groupID}/users/me`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._checkResponse);\n  }\n\n  getCards() {\n    return fetch(`${this._address}/v1/${this._groupID}/cards`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._checkResponse);\n  }\n\n  setUserInfo(formData) {\n    return fetch(`${this._address}/v1/${this._groupID}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: formData.name,\n        about: formData.about\n      })\n    })\n      .then(this._checkResponse);\n  }\n\n  addCard(formData) {\n    return fetch(`${this._address}/v1/${this._groupID}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: formData.name,\n        link: formData.link\n      })\n    })\n      .then(this._checkResponse);\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._address}/v1/${this._groupID}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._checkResponse);\n  }\n\n  changeLikeCardStatus(cardId) {\n    return fetch(`${this._address}/v1/${this._groupID}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._checkResponse);\n  }\n\n  deleteLikeCard(cardId) {\n    return fetch(`${this._address}/v1/${this._groupID}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._checkResponse);\n  }\n\n  setUserAvatar(formData) {\n    return fetch(`${this._address}/v1/${this._groupID}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: formData.avatar\n      })\n    })\n      .then(this._checkResponse);\n  }\n\n  _checkResponse(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status} - ${res.statusText}`);\n    }\n    return res.json();\n  }\n}\n\nconst config = {\n  address: 'https://mesto.nomoreparties.co',\n  token: '83427565-56e8-48c1-b66e-268601726ef3',\n  groupID: 'cohort-24'\n}\n\nconst api = new Api(config);\nexport default api;\n\n","import React, { useState, useContext } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const currentUser = useContext(CurrentUserContext);\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  // После загрузки текущего пользователя из API\n  // его данные будут использованы в управляемых компонентах.\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, isOpen]);\n\n  function handleSubmit(e) {\n    // Запрещаем браузеру переходить по адресу формы\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"profile\"\n      title=\"редактировать профиль\"\n      isOpen={isOpen}\n      onClose={onClose}\n      save=\"Сохранить\"\n      onSubmit={handleSubmit}>\n      <input id=\"popup__name\" type=\"text\" name=\"name\" placeholder=\"Имя\"\n        className=\"popup__input popup__input_type_name\" value={name || ''}\n        minLength=\"2\" maxLength=\"40\" required onChange={handleChangeName} />\n      <span className=\"popup__input-error popup__name-error\"></span>\n      <input id=\"popup__job\" type=\"text\" name=\"job\" placeholder=\"О себе\"\n        className=\"popup__input popup__input_type_job\" value={description || ''}\n        minLength=\"2\" maxLength=\"200\" required onChange={handleChangeDescription} />\n      <span className=\"popup__input-error popup__job-error\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;\n","import React, { useState, useContext, useRef } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const currentUser = useContext(CurrentUserContext);\n  const avatarDom = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onUpdateAvatar({\n      avatar: avatarDom.current.value /* Значение инпута, полученное с помощью рефа */,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"avatar\"\n      title=\"обновить аватар\"\n      isOpen={isOpen}\n      onClose={onClose}\n      save=\"Сохранить\"\n      onSubmit={handleSubmit}\n    >\n      <input id=\"popup__avatar\" type=\"url\" name=\"avatar\" placeholder=\"https://somewebsite.com/someimage.jpg\"\n        className=\"popup__input popup__input_type_avatar\" required\n        ref={avatarDom} />\n      <span className=\"popup__input-error popup__avatar-error\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;\n","import React, { useState } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\n  const [name, setPlace] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  function handleChangePlace(e) {\n    setPlace(e.target.value);\n  }\n\n  function handleChangeLink(e) {\n    setLink(e.target.value);\n  }\n\n  // После загрузки текущего пользователя из API\n  // его данные будут использованы в управляемых компонентах.\n  React.useEffect(() => {\n    setPlace('');\n    setLink('');\n  }, [isOpen]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    onAddPlace({\n      name,\n      link,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"places\"\n      title=\"новое место\"\n      isOpen={isOpen}\n      onClose={onClose}\n      save=\"Сохранить\"\n      onSubmit={handleSubmit}\n    >\n      <input id=\"popup__place\" type=\"text\" name=\"place\" placeholder=\"Название\" value={name || ''}\n        className=\"popup__input popup__input_type_place\" minLength=\"2\" maxLength=\"30\" required\n        onChange={handleChangePlace} />\n      <span className=\"popup__input-error popup__place-error\"></span>\n      <input id=\"popup__link\" type=\"url\" name=\"link\" placeholder=\"Ссылка на картинку\" value={link || ''}\n        className=\"popup__input popup__input_type_link\" required\n        onChange={handleChangeLink} />\n      <span className=\"popup__input-error popup__link-error\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ component: Component, ...props }) => (\n  <Route>\n    {\n      () => (props.loggedIn ? <Component {...props} /> : <Redirect to='/signin' />)\n    }\n  </Route>\n);\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\n\nfunction Register(props) {\n\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value)\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value)\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    if (!password || !email) {\n      return;\n    }\n    props.onRegister(password, email);\n  }\n\n  return (\n    <main className=\"content\">\n      <section className=\"registration\">\n        <form onSubmit={handleSubmit} className=\"registration__form\">\n          <h1 className=\"registration__title\">регистрация</h1>\n          <input id=\"registration__email\" type=\"text\" name=\"email\" placeholder=\"Email\"\n            className=\"registration__input registration__input_type_email\"\n            minLength=\"2\" maxLength=\"30\" value={email} required onChange={handleChangeEmail} />\n          <span className=\"registration__input-error registration__email-error\"></span>\n          <input id=\"registration__password\" type=\"password\" name=\"password\" placeholder=\"Пароль\"\n            className=\"registration__input registration__input_type_password\"\n            value={password} required onChange={handleChangePassword} />\n          <span className=\"registration__input-error registration__password-error\"></span>\n          <button type=\"submit\" aria-label=\"Сохранить\"\n            className=\"button button_type_login\">зарегистрироваться</button>\n          <p><Link to=\"singin\" className=\"registration__subtitle\">уже зарегистрированы&#63; Войти</Link></p>\n        </form>\n      </section>\n    </main>\n  );\n}\n\nexport default withRouter(Register);\n\n\n// import React from 'react';\n// import { Link, withRouter } from 'react-router-dom';\n\n// class Register extends React.Component {\n//   constructor(props) {\n//     super(props);\n//     this.state = {\n//       email: '',\n//       password: '',\n//       message: ''\n//     }\n\n//     this.handleChange = this.handleChange.bind(this);\n//     this.handleSubmit = this.handleSubmit.bind(this);\n//   }\n\n//   handleChange(e) {\n//     const { name, value } = e.target;\n//     this.setState({\n//       [name]: value\n//     });\n//   }\n\n//   handleSubmit(e) {\n//     e.preventDefault()\n//     if (!this.state.password || !this.state.email) {\n//       return;\n//     }\n//     const { password, email } = this.state;\n//     this.props.onRegister(password, email);\n//   }\n\n//   render() {\n//     return (\n//         <main className=\"content\">\n//           <section className=\"registration\">\n//             <form onSubmit={this.handleSubmit} className=\"registration__form\">\n//               <h1 className=\"registration__title\">регистрация</h1>\n//               <input id=\"registration__email\" type=\"text\" name=\"email\" placeholder=\"Email\"\n//                 className=\"registration__input registration__input_type_email\"\n//                 minLength=\"2\" maxLength=\"30\" value={this.state.email} required onChange={this.handleChange} />\n//               <span className=\"registration__input-error registration__email-error\"></span>\n//               <input id=\"registration__password\" type=\"password\" name=\"password\" placeholder=\"Пароль\"\n//                 className=\"registration__input registration__input_type_password\"\n//                 value={this.state.password} required onChange={this.handleChange} />\n//               <span className=\"registration__input-error registration__password-error\"></span>\n//               <button type=\"submit\" aria-label=\"Сохранить\"\n//                 className=\"button button_type_login\">зарегистрироваться</button>\n//               <p><Link to=\"singin\" className=\"registration__subtitle\">уже зарегистрированы&#63; Войти</Link></p>\n//             </form>\n//           </section>\n//         </main>\n//     );\n//   }\n// }\n\n// export default withRouter(Register);\n\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\n\nfunction Login(props) {\n\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value)\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value)\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    if (!password || !email) {\n      return;\n    }\n    props.onLogin(password, email);\n  }\n\n  return (\n    <main className=\"content\">\n      <section className=\"registration\">\n        <form onSubmit={handleSubmit} className=\"registration__form\">\n          <h1 className=\"registration__title\">вход</h1>\n          <input id=\"registration__email\" type=\"text\" name=\"email\" placeholder=\"email@mail.com\"\n            className=\"registration__input registration__input_type_email\" value={email}\n            minLength=\"2\" maxLength=\"30\" required onChange={handleChangeEmail} />\n          <span className=\"registration__input-error registration__email-error\"></span>\n          <input id=\"registration__password\" type=\"password\" name=\"password\"\n            placeholder=\"••••••••••\" className=\"registration__input registration__input_type_password\"\n            value={password} required onChange={handleChangePassword} />\n          <span className=\"registration__input-error registration__password-error\"></span>\n          <button type=\"submit\" aria-label=\"Сохранить\"\n            className=\"button button_type_login\">войти</button>\n        </form>\n      </section>\n    </main>\n  );\n}\n\nexport default withRouter(Login);\n","export default __webpack_public_path__ + \"static/media/popup-union-success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/popup-union-fail.df8eddf6.svg\";","import React, { useState, useContext, useRef } from 'react';\nimport popupSaccess from '../images/popup-union-success.svg';\nimport popupFail from '../images/popup-union-fail.svg';\n\nfunction InfoTooltip({ isOpen, onClose, isSuccess }) {\n\n  const succesText = `${isSuccess ? 'вы успешно зарегистрировались!' : 'что-то пошло не так! Попробуйте ещё раз.'}`;\n\n  return (\n    <section>\n      <article className={`popup popup_type_success ${isOpen && \"popup_opened\"}`}>\n        <form action=\"#\" method=\"POST\" name=\"Input-list-places\"\n          className=\"popup__container-success popup__validate\">\n          {isSuccess ? (\n            <img src={popupSaccess} alt=\"Успешная регистрация\" className=\"popup__image-result\" />)\n            : (<img src={popupFail} alt=\"Неуспешная регистрация\" className=\"popup__image-result\" />)}\n          <button type=\"button\" aria-label=\"Закрыть попап\"\n            className=\"button button_type_close\" onClick={onClose}></button>\n          <h2 className=\"popup__title\">{succesText}</h2>\n        </form>\n      </article>\n    </section>\n  )\n}\n\nexport default InfoTooltip;\n","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nexport const register = (password, email) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ password, email })\n  })\n    .then((checkResponse) => {\n      console.log(checkResponse)\n      if (checkResponse.status === 201) {\n        return checkResponse.json();\n      }\n    })\n    .then((checkResponse) => {\n      console.log(checkResponse)\n      return checkResponse;\n    })\n};\n\nexport const authorize = (password, email) => {\n  return fetch(`${BASE_URL}/signin`, {\n    // mode: \"no-cors\",\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ password, email })\n  })\n    .then((checkResponse) => {\n      if (checkResponse.status === 200) {\n        return checkResponse.json();\n      }\n    })\n    .then((checkResponse) => {\n      // сохраняем токен\n      localStorage.setItem('token', checkResponse.token);\n      return checkResponse;\n    })\n};\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      \"Authorization\": `Bearer ${localStorage.getItem('token')}`\n    },\n  })\n    .then((checkResponse) => {\n      if (checkResponse.status === 200) {\n        return checkResponse.json();\n      }\n    })\n    .then((checkResponse) => {\n      return checkResponse;\n    })\n};\n","import React, { useEffect, useState } from 'react';\nimport { Redirect, Switch, Route, useHistory, withRouter } from \"react-router-dom\";\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ProtectedRoute from './ProtectedRoute';\nimport Register from './Register';\nimport Login from './Login';\nimport InfoTooltip from './InfoTooltip';\nimport * as auth from '../utils/auth';\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({ name: '', link: '' });\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [isSuccess, setIsSuccess] = React.useState(false);\n  // ({\n  //   succesText: 'что-то пошло не так! Попробуйте ещё раз.',\n  //   succesIcon: ''\n  // });\n\n  const history = useHistory();\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  }\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipPopupOpen(false);\n    setSelectedCard({ name: '', link: '' });\n  }\n\n  const handleEscClose = (evt) => {\n    if (evt.key === 'Escape') {\n      closeAllPopups();\n    }\n  }\n\n  React.useEffect(() => {\n    document.addEventListener('keydown', handleEscClose);\n    return () => {\n      document.removeEventListener('keydown', handleEscClose);\n    }\n  })\n\n  useEffect(() => {\n    api.getUserInfo()\n      .then((result) => {\n        setCurrentUser(result);\n      })\n      .catch(err => console.log('Ошибка. Запрос на получение инфо о пользователе не выполнен.'));\n  }, [])\n\n  useEffect(() => {\n    api.getCards()\n      .then((result) => {\n        setCards(result);\n      })\n      .catch(err => console.log('Ошибка при получании карточек'));\n  }, [])\n\n  const handleUpdateUser = (user) => {\n    api.setUserInfo(user)\n      .then((result) => {\n        setCurrentUser(result);\n        closeAllPopups();\n      })\n      .catch(err => console.log('Ошибка. Запрос на обновление профиля не выполнен.'));\n  }\n\n  const handleUpdateAvatar = (user) => {\n    api.setUserAvatar(user)\n      .then((result) => {\n        setCurrentUser(result);\n        closeAllPopups();\n      })\n      .catch(err => console.log('Ошибка. Запрос на обновление профиля не выполнен.'));\n  }\n\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => {\n          return state.map((c) => {\n            return c._id === card._id ? newCard : c\n          })\n        });\n      })\n      .catch(err => console.log('Ошибка. Запрос на покраску лайка не выполнен.'));\n\n    api.deleteLikeCard(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(err => console.log('Ошибка. Запрос на уменьшение лайка не выполнен.'));\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards(cards.filter(item =>\n          item._id !== card._id)\n        )\n      })\n      .catch(err => console.log('Ошибка. Запрос на удаление карточки не выполнен.'));\n  }\n\n  const handleAddPlaceSubmit = (newCard) => {\n    api.addCard(newCard)\n      .then((result) => {\n        setCards([result, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => console.log('Ошибка. Запрос на добавление карточки не выполнен.'));\n  }\n\n  const checkToken = () => {\n    const jwt = localStorage.getItem('token');\n    if (jwt) {\n      auth.getContent(jwt)\n        .then((res) => {\n          setLoggedIn(true);\n          setEmail(res.data.email);\n          history.push('/');\n        })\n        .catch((err) => console.log('Ошибка. Запрос на проверку токена не выполнен.'));\n    }\n  }\n\n  const handleLogin = (password, email) => {\n    auth.authorize(password, email)\n      .then((res) => {\n        if (res.token) {\n          setLoggedIn(true);\n          history.push('/');\n          checkToken();\n        }\n      })\n      .catch((err) => {\n        console.log('Ошибка. Запрос на вход не выполнен.')\n      });\n\n  }\n\n  const handleRegister = (password, email) => {\n    auth.register(password, email)\n      .then((result) => {\n        console.log(result)\n        if (result) {\n          setIsSuccess(true);\n          setIsInfoTooltipPopupOpen(true);\n          history.push('/signin');\n        }\n         else {\n          setIsSuccess(false);\n          setIsInfoTooltipPopupOpen(true);\n        }\n      })\n      .catch((err) => {\n        console.log('Ошибка. Запрос на регистрацию не выполнен.')\n        setIsSuccess(false);\n        setIsInfoTooltipPopupOpen(true);\n      });\n  }\n\n  React.useEffect(() => {\n    checkToken();\n  }, [history]);\n\n  function signOut() {\n    setLoggedIn(false);\n    localStorage.removeItem('token');\n    history.push('/signin');\n    setEmail(false);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header\n          email={email}\n          loggedIn={loggedIn}\n          onSignOut={signOut}\n        />\n        <Switch>\n          <ProtectedRoute exact path=\"/\"\n            loggedIn={loggedIn}\n            component={Main}\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n          />\n          <Route path=\"/signin\">\n            {/* <Login {...props} onLogin={handleLogin} /> */}\n            <Login onLogin={handleLogin} />\n          </Route>\n          <Route path=\"/signup\">\n            <Register onRegister={handleRegister} />\n          </Route>\n          <Route >\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n          </Route>\n        </Switch>\n        <Footer />\n        <PopupWithForm\n          name=\"submition\"\n          title=\"вы уверены?\"\n          save=\"да\"\n        >\n        </PopupWithForm>\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n        <InfoTooltip\n          isOpen={isInfoTooltipPopupOpen}\n          onClose={closeAllPopups}\n          isSuccess={isSuccess}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default withRouter(App);\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}