(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{29:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(18),s=n.n(o),i=n(8),r=(n(29),n(22)),u=n(2),l=n(3),p=n(0);var _=function(e){var t=e.email,n=e.onSignOut,a=e.loggedIn,c=Object(l.h)().pathname,o="".concat("/signup"===c?"signin":"signup"),s="".concat("/signup"===c?"\u0432\u043e\u0439\u0442\u0438":"\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f");return Object(p.jsxs)("header",{className:"header",children:[Object(p.jsx)(i.b,{to:"/",rel:"noopener",className:"logo"}),a?Object(p.jsxs)("ul",{className:"header__list",children:[Object(p.jsx)("li",{className:"header__text",children:t}),Object(p.jsx)("li",{className:"header__text",children:Object(p.jsx)(i.b,{to:o,className:"header__link",onClick:n,children:"\u0432\u044b\u0439\u0442\u0438"})})]}):Object(p.jsx)("p",{className:"header__text",children:Object(p.jsx)(i.b,{to:o,className:"header__link",onClick:n,children:s})})]})},d=Object(a.createContext)();var j=function(e){var t=e.card,n=e.onCardClick,c=e.onCardLike,o=e.onCardDelete,s=Object(a.useContext)(d),i=t.owner._id===s._id,r="button button_type_remove ".concat(i?"button_type_remove":"button_disabled"),u=t.likes.some((function(e){return e._id===s._id})),l="button button_type_like ".concat(u?"button_clicked":"");return Object(p.jsxs)("article",{className:"place",children:[Object(p.jsx)("button",{type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",className:r,onClick:function(){o(t)}}),Object(p.jsx)("img",{src:t.link,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u043c\u0435\u0441\u0442\u0430 \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c\n      ".concat(t.name),className:"place__image",onClick:function(){n(t)}}),Object(p.jsxs)("div",{className:"place__list-sights",children:[Object(p.jsx)("h2",{className:"place__title",children:t.name}),Object(p.jsxs)("div",{className:"place__like-conteiner",children:[Object(p.jsx)("button",{type:"button","aria-label":"\u041b\u0430\u0439\u043a\u043d\u0443\u0442\u044c",className:l,onClick:function(){c(t)}}),Object(p.jsx)("p",{className:"place__text",children:t.likes.length})]})]})]})};var h=function(e){var t=e.onEditAvatar,n=e.onEditProfile,c=e.onAddPlace,o=e.onCardClick,s=e.cards,i=e.onCardLike,r=e.onCardDelete,u=Object(a.useContext)(d);return Object(p.jsxs)("main",{className:"content",children:[Object(p.jsxs)("section",{className:"profile",children:[Object(p.jsxs)("div",{className:"profile__block",children:[Object(p.jsx)("img",{src:u.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440",className:"profile__image"}),Object(p.jsx)("button",{type:"button","aria-label":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0430\u0432\u0430\u0442\u0430\u0440\u0430",className:"button button_type_edit-avatar",onClick:t})]}),Object(p.jsxs)("div",{className:"profile__info",children:[Object(p.jsx)("h1",{className:"profile__title",children:u.name}),Object(p.jsx)("button",{type:"button","aria-label":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",className:"button button_type_edit",onClick:n}),Object(p.jsx)("p",{className:"profile__subtitle",children:u.about})]}),Object(p.jsx)("button",{type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",className:"button button_type_add-card",onClick:c})]}),Object(p.jsx)("section",{"aria-label":"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u043c\u0435\u0441\u0442",className:"places",children:s.map((function(e){return Object(p.jsx)(j,{card:e,onCardClick:o,onCardLike:i,onCardDelete:r},e._id)}))})]})};new Date;var b=function(){return Object(p.jsx)("footer",{className:"footer",children:Object(p.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Mesto Russia"})})};var m=function(e){var t=e.name,n=e.title,a=e.isOpen,c=e.onClose,o=e.children,s=e.save,i=e.onSubmit;return Object(p.jsx)("article",{className:"popup popup_type_".concat(t," ").concat(a&&"popup_opened"),children:Object(p.jsxs)("form",{action:"#",method:"POST",name:"Input-list-".concat(t),className:"popup__container popup__validate",onSubmit:i,children:[Object(p.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",className:"button button_type_close",onClick:c}),Object(p.jsx)("h2",{className:"popup__title",children:n}),o,Object(p.jsx)("button",{type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",className:"button button_type_submit",children:s})]})})};var f=function(e){var t=e.card,n=e.onClose;return Object(p.jsx)("article",{className:"popup popup_place_picture  ".concat(t.link&&"popup_opened"),children:Object(p.jsxs)("form",{action:"#",method:"POST",name:"Input-list",className:"popup__container popup__container_size_large",children:[Object(p.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",className:"button button_type_close",onClick:n}),Object(p.jsx)("img",{src:t.link,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u043c\u0435\u0441\u0442\u0430 \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c ".concat(t.name),className:"popup__image"}),Object(p.jsx)("h2",{className:"popup__title popup__title_size_small",children:t.name})]})})},O=n(20),g=n(21),x=new(function(){function e(t){var n=t.address,a=t.token,c=t.groupID;Object(O.a)(this,e),this._address=n,this._token=a,this._groupID=c}return Object(g.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/users/me"),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"getCards",value:function(){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/cards"),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}},{key:"addCard",value:function(e){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"changeLikeCardStatus",value:function(e){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"deleteLikeCard",value:function(e){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then(this._checkResponse)}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status," - ").concat(e.statusText))}}]),e}())({address:"https://mesto.nomoreparties.co",token:"83427565-56e8-48c1-b66e-268601726ef3",groupID:"cohort-24"});var v=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateUser,s=Object(a.useState)(""),i=Object(u.a)(s,2),r=i[0],l=i[1],_=Object(a.useState)(""),j=Object(u.a)(_,2),h=j[0],b=j[1],f=Object(a.useContext)(d);return c.a.useEffect((function(){l(f.name),b(f.about)}),[f,t]),Object(p.jsxs)(m,{name:"profile",title:"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:t,onClose:n,save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),o({name:r,about:h})},children:[Object(p.jsx)("input",{id:"popup__name",type:"text",name:"name",placeholder:"\u0418\u043c\u044f",className:"popup__input popup__input_type_name",value:r||"",minLength:"2",maxLength:"40",required:!0,onChange:function(e){l(e.target.value)}}),Object(p.jsx)("span",{className:"popup__input-error popup__name-error"}),Object(p.jsx)("input",{id:"popup__job",type:"text",name:"job",placeholder:"\u041e \u0441\u0435\u0431\u0435",className:"popup__input popup__input_type_job",value:h||"",minLength:"2",maxLength:"200",required:!0,onChange:function(e){b(e.target.value)}}),Object(p.jsx)("span",{className:"popup__input-error popup__job-error"})]})};var k=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateAvatar,s=(Object(a.useContext)(d),c.a.useRef());return Object(p.jsxs)(m,{name:"avatar",title:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,onClose:n,save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),o({avatar:s.current.value})},children:[Object(p.jsx)("input",{id:"popup__avatar",type:"url",name:"avatar",placeholder:"https://somewebsite.com/someimage.jpg",className:"popup__input popup__input_type_avatar",required:!0,ref:s}),Object(p.jsx)("span",{className:"popup__input-error popup__avatar-error"})]})};var N=function(e){var t=e.isOpen,n=e.onClose,a=e.onAddPlace,o=c.a.useState(""),s=Object(u.a)(o,2),i=s[0],r=s[1],l=c.a.useState(""),_=Object(u.a)(l,2),d=_[0],j=_[1];return c.a.useEffect((function(){r(""),j("")}),[t]),Object(p.jsxs)(m,{name:"places",title:"\u043d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:t,onClose:n,save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),a({name:i,link:d})},children:[Object(p.jsx)("input",{id:"popup__place",type:"text",name:"place",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:i||"",className:"popup__input popup__input_type_place",minLength:"2",maxLength:"30",required:!0,onChange:function(e){r(e.target.value)}}),Object(p.jsx)("span",{className:"popup__input-error popup__place-error"}),Object(p.jsx)("input",{id:"popup__link",type:"url",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:d||"",className:"popup__input popup__input_type_link",required:!0,onChange:function(e){j(e.target.value)}}),Object(p.jsx)("span",{className:"popup__input-error popup__link-error"})]})},C=n(23),y=n(24),S=["component"],I=function(e){var t=e.component,n=Object(y.a)(e,S);return Object(p.jsx)(l.b,{children:function(){return n.loggedIn?Object(p.jsx)(t,Object(C.a)({},n)):Object(p.jsx)(l.a,{to:"/signin"})}})};var L=Object(l.i)((function(e){var t=c.a.useState(""),n=Object(u.a)(t,2),a=n[0],o=n[1],s=c.a.useState(""),r=Object(u.a)(s,2),l=r[0],_=r[1];return Object(p.jsx)("main",{className:"content",children:Object(p.jsx)("section",{className:"registration",children:Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault(),l&&a&&e.onRegister(l,a)},className:"registration__form",children:[Object(p.jsx)("h1",{className:"registration__title",children:"\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)("input",{id:"registration__email",type:"text",name:"email",placeholder:"Email",className:"registration__input registration__input_type_email",minLength:"2",maxLength:"30",value:a,required:!0,onChange:function(e){o(e.target.value)}}),Object(p.jsx)("span",{className:"registration__input-error registration__email-error"}),Object(p.jsx)("input",{id:"registration__password",type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"registration__input registration__input_type_password",value:l,required:!0,onChange:function(e){_(e.target.value)}}),Object(p.jsx)("span",{className:"registration__input-error registration__password-error"}),Object(p.jsx)("button",{type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",className:"button button_type_login",children:"\u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(p.jsx)("p",{children:Object(p.jsx)(i.b,{to:"singin",className:"registration__subtitle",children:"\u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})})]})})})}));var D=Object(l.i)((function(e){var t=c.a.useState(""),n=Object(u.a)(t,2),a=n[0],o=n[1],s=c.a.useState(""),i=Object(u.a)(s,2),r=i[0],l=i[1];return Object(p.jsx)("main",{className:"content",children:Object(p.jsx)("section",{className:"registration",children:Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault(),r&&a&&e.onLogin(r,a)},className:"registration__form",children:[Object(p.jsx)("h1",{className:"registration__title",children:"\u0432\u0445\u043e\u0434"}),Object(p.jsx)("input",{id:"registration__email",type:"text",name:"email",placeholder:"email@mail.com",className:"registration__input registration__input_type_email",value:a,minLength:"2",maxLength:"30",required:!0,onChange:function(e){o(e.target.value)}}),Object(p.jsx)("span",{className:"registration__input-error registration__email-error"}),Object(p.jsx)("input",{id:"registration__password",type:"password",name:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"registration__input registration__input_type_password",value:r,required:!0,onChange:function(e){l(e.target.value)}}),Object(p.jsx)("span",{className:"registration__input-error registration__password-error"}),Object(p.jsx)("button",{type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",className:"button button_type_login",children:"\u0432\u043e\u0439\u0442\u0438"})]})})})})),E=n.p+"static/media/popup-union-success.1b6082f8.svg",w=n.p+"static/media/popup-union-fail.df8eddf6.svg";var P=function(e){var t=e.isOpen,n=e.onClose,a=e.isSuccess,c="".concat(a?"\u0432\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.");return Object(p.jsx)("section",{children:Object(p.jsx)("article",{className:"popup popup_type_success ".concat(t&&"popup_opened"),children:Object(p.jsxs)("form",{action:"#",method:"POST",name:"Input-list-places",className:"popup__container-success popup__validate",children:[a?Object(p.jsx)("img",{src:E,alt:"\u0423\u0441\u043f\u0435\u0448\u043d\u0430\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",className:"popup__image-result"}):Object(p.jsx)("img",{src:w,alt:"\u041d\u0435\u0443\u0441\u043f\u0435\u0448\u043d\u0430\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",className:"popup__image-result"}),Object(p.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",className:"button button_type_close",onClick:n}),Object(p.jsx)("h2",{className:"popup__title",children:c})]})})})},T="https://auth.nomoreparties.co";var A=Object(l.i)((function(){var e=c.a.useState(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],s=c.a.useState(!1),i=Object(u.a)(s,2),j=i[0],O=i[1],g=c.a.useState(!1),C=Object(u.a)(g,2),y=C[0],S=C[1],E=c.a.useState(!1),w=Object(u.a)(E,2),A=w[0],R=w[1],U=c.a.useState({name:"",link:""}),z=Object(u.a)(U,2),q=z[0],J=z[1],F=c.a.useState({}),B=Object(u.a)(F,2),H=B[0],M=B[1],G=c.a.useState([]),K=Object(u.a)(G,2),Q=K[0],V=K[1],W=c.a.useState(!1),X=Object(u.a)(W,2),Y=X[0],Z=X[1],$=c.a.useState(""),ee=Object(u.a)($,2),te=ee[0],ne=ee[1],ae=c.a.useState(!1),ce=Object(u.a)(ae,2),oe=ce[0],se=ce[1],ie=Object(l.g)(),re=function(){o(!1),O(!1),S(!1),R(!1),J({name:"",link:""})},ue=function(e){"Escape"===e.key&&re()};c.a.useEffect((function(){return document.addEventListener("keydown",ue),function(){document.removeEventListener("keydown",ue)}})),Object(a.useEffect)((function(){x.getUserInfo().then((function(e){M(e)})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0438\u043d\u0444\u043e \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d.")}))}),[]),Object(a.useEffect)((function(){x.getCards().then((function(e){V(e)})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a")}))}),[]);var le=function(){var e=localStorage.getItem("token");e&&fetch("".concat(T,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){if(200===e.status)return e.json()})).then((function(e){return e})).then((function(e){Z(!0),ne(e.data.email),ie.push("/")})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u0442\u043e\u043a\u0435\u043d\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d.")}))};return c.a.useEffect((function(){le()}),[ie]),Object(p.jsx)(d.Provider,{value:H,children:Object(p.jsxs)("div",{className:"page",children:[Object(p.jsx)(_,{email:te,loggedIn:Y,onSignOut:function(){Z(!1),localStorage.removeItem("token"),ie.push("/signin"),ne(!1)}}),Object(p.jsxs)(l.d,{children:[Object(p.jsx)(I,{exact:!0,path:"/",loggedIn:Y,component:h,onEditAvatar:function(){o(!0)},onEditProfile:function(){O(!0)},onAddPlace:function(){S(!0)},onCardClick:function(e){J(e)},cards:Q,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===H._id}));x.changeLikeCardStatus(e._id,!t).then((function(t){V((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043f\u043e\u043a\u0440\u0430\u0441\u043a\u0443 \u043b\u0430\u0439\u043a\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d.")})),x.deleteLikeCard(e._id,t).then((function(t){V((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u0435 \u043b\u0430\u0439\u043a\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d.")}))},onCardDelete:function(e){x.deleteCard(e._id).then((function(){V(Q.filter((function(t){return t._id!==e._id})))})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d.")}))}}),Object(p.jsx)(l.b,{path:"/signin",children:Object(p.jsx)(D,{onLogin:function(e,t){(function(e,t){return fetch("".concat(T,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){if(200===e.status)return e.json()})).then((function(e){return localStorage.setItem("token",e.token),e}))})(e,t).then((function(e){e.token&&(Z(!0),ie.push("/"),le())})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0432\u0445\u043e\u0434 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d.")}))}})}),Object(p.jsx)(l.b,{path:"/signup",children:Object(p.jsx)(L,{onRegister:function(e,t){(function(e,t){return fetch("".concat(T,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){if(console.log(e),201===e.status)return e.json()})).then((function(e){return console.log(e),e}))})(e,t).then((function(e){console.log(e),e?(se(!0),R(!0),ie.push("/signin")):(se(!1),R(!0))})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d."),se(!1),R(!0)}))}})}),Object(p.jsx)(l.b,{children:Y?Object(p.jsx)(l.a,{to:"/"}):Object(p.jsx)(l.a,{to:"/signin"})})]}),Object(p.jsx)(b,{}),Object(p.jsx)(m,{name:"submition",title:"\u0432\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",save:"\u0434\u0430"}),Object(p.jsx)(v,{isOpen:j,onClose:re,onUpdateUser:function(e){x.setUserInfo(e).then((function(e){M(e),re()})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d.")}))}}),Object(p.jsx)(k,{isOpen:n,onClose:re,onUpdateAvatar:function(e){x.setUserAvatar(e).then((function(e){M(e),re()})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d.")}))}}),Object(p.jsx)(f,{card:q,onClose:re}),Object(p.jsx)(N,{isOpen:y,onClose:re,onAddPlace:function(e){x.addCard(e).then((function(e){V([e].concat(Object(r.a)(Q))),re()})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d.")}))}}),Object(p.jsx)(P,{isOpen:A,onClose:re,isSuccess:oe})]})})})),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(i.a,{children:Object(p.jsx)(A,{})})}),document.getElementById("root")),R()}},[[36,1,2]]]);
//# sourceMappingURL=main.072e5adf.chunk.js.map